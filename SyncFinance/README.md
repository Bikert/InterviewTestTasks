Тестовое задание: Учёт финансов с несколькими пользователями
Описание задачи: Разработай систему, в которой несколько пользователей могут одновременно пополнять свои счета и делать переводы между счетами. Необходимо учесть, что несколько операций могут выполняться параллельно, и нужно обеспечить корректность данных (например, невозможность перевести деньги с отрицательного баланса).

Технические требования:

Класс Account:

Поле balance (баланс) — должен быть доступен для изменения только через методы.
Методы:
deposit(double amount) — метод для пополнения счета.
withdraw(double amount) — метод для снятия средств.
getBalance() — метод для получения текущего баланса.
Методы должны быть потокобезопасными.
Класс TransactionService:

Метод transfer(Account from, Account to, double amount) — переводит средства между двумя счетами. Этот метод должен быть потокобезопасным.
Каждый перевод должен быть выполнен атомарно, то есть либо оба счета должны быть обновлены, либо ни один. Важно избежать ситуации, когда средства снимаются с одного счета, но не добавляются на другой (например, из-за исключения).
Класс BankSystem:

Это основной класс, который имитирует работу банка. Он должен содержать несколько пользователей с аккаунтами и выполнять операции по переводу между аккаунтами с параллельным выполнением.
В BankSystem необходимо запустить несколько потоков, каждый из которых будет выполнять операции с переводами или пополнениями одновременно.
Нужно организовать управление потоками с помощью пула потоков (ExecutorService).
Дополнительные требования:

Реализовать правильную синхронизацию при работе с балансами, чтобы избежать ошибок, связанных с конкурентными изменениями данных (например, гонок данных).
Убедиться, что после выполнения всех операций все счета корректно обновлены.
Пример сценария:

Пользователь 1 пополняет счёт на 1000.
Пользователь 2 пополняет счёт на 500.
Пользователь 1 переводит 300 на счёт пользователя 2.
Пользователь 2 переводит 100 на счёт пользователя 1.
Все операции выполняются параллельно, и нужно обеспечить правильное взаимодействие потоков.

Ключевые моменты:
Синхронизация: Методы deposit, withdraw и getBalance в классе Account синхронизированы для предотвращения гонок данных. В TransactionService синхронизирован метод transfer, чтобы гарантировать атомарность перевода.
Использование пула потоков: В BankSystem создается пул потоков, который обрабатывает параллельные операции.
Тестирование многозадачности: Нужно проверить, что все операции выполняются корректно и данные не искажаются из-за конкуренции.
Дополнительные вопросы:
Что будет, если два потока попытаются перевести деньги одновременно с одного счета на другой? Как это можно решить?
Как можно улучшить производительность при большом числе операций?
Это тестовое задание сочетает в себе основы многопоточности, синхронизации и управления ресурсами, что является важными аспектами при разработке многозадачных финансовых приложений.

